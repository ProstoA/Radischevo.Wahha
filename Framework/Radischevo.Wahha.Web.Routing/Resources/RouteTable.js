var RouteTable=(function(){var x=function(a,b,c){var t=/(?:{([a-zA-Z]+)})/g;var e=/([\{|\}])/g;this.u=(typeof a==="string")?a:"";this.d=b||{};this.c=c||{};this.p=(function(a){var f=[];var m=a.match(t)||[];for(var i=0,l=m.length;i<l;++i){var n=m[i].replace(e,"");if(n)f.push(n)}return f})(this.u);this.l=function(v){for(var i=this.p.length-1;i>=0;--i){var a=this.p[i];var c=this.c[a];if(c){if(typeof c==="string"){var r=new RegExp(c,"gi");if(!r.test(v[a]))return false}else if(typeof c==="function"){if(!c(a))return false;}}}return true};this.g=function(v){v=v||{};var V={};for(var a in this.d)V[a]=this.d[a];for(var a in v)V[a]=v[a];if(!this.l(V))return "";var r=this.u;for(var i=this.p.length-1;i>=0;--i){var a=this.p[i];if(new RegExp("/{"+a+"}$","").test(r)&&((V[a]&&V[a]===this.d[a])||!V[a])){r=r.replace("/{"+a+"}","")}else{if(!V[a])return "";r=r.replace("{"+a+"}",V[a])}}if(r.substr(0,1)==='~')r=r.substr(1);if(r.substr(0,1)!=='/')r='//'+r;if(r.substring(r.length-1,r.length)==='/')r=r.substring(0,r.length-1);return r.replace(t,"")}};return{routes:{},mapRoute:function(name,url,defaults,constraints){this.routes[name]=new x(url,defaults,constraints)},route:function(name,values){var i=this.routes[name];if(i)return i.g(values);return null}}})();